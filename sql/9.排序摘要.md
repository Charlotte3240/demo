```sql
## 排序

# 升序 ASC
# 降序 DESC

SELECT  * from goods g 
order by price DESC

select * FROM  goods g 
WHERE brandName = 'asus'
ORDER BY price desc

# 多个条件进行排序
select * FROM  goods g 
order by brandName  ASC , price  DESC  

# 随机排序
select * FROM  goods g 
order by RAND() 
LIMIT 1

# 别名
SELECT brandName , shopName,create_date,MONTH(create_date) as m from goods g 
order by m DESC 

SELECT brandName , shopName,create_date from goods g 
order by MONTH(create_date) DESC 

# 查询出厂时间最长的商品
select * from goods g 
WHERE create_date is not NULL 
ORDER by create_date desc 

## field 函数
# field(value,str1,str2,str3)
# value 与str1,2,3... 比较,
# 如果value 在集合中返回index，不在返回0
# index 从1开始

select field('c','a','b','d') #0
select field('c','a','b','c') #3
# 包含t和r的排在前面 ，t在r上面 r是1，t是2 倒序 
select brandName ,LEFT(brandName ,1) as b,shopName  FROM  goods g order by FIELD(b,'r','t')  desc 

## count 统计函数
select COUNT(*) from goods g  WHERE brandName = 'asus'
# 注意 count 只能统计非空值，如果统计字段，会跳过null
SELECT COUNT(*) from goods g3		# 5个 
SELECT  COUNT(tags) from goods g2   # 4个 

# 查询价格最贵的
select * from goods g WHERE price is not null order by price  desc limit 1
select * FROM  goods g2 WHERE price = (SELECT MAX(price) from goods g3)  

# 查询出厂时间最短的
 select * from goods g WHERE YEAR(create_date) = (select YEAR(MAX(create_date)) from goods g)

alter table article add clickCount int  
update  article  set clickCount =  id

# 查询点击数最小的文章
SELECT  * FROM article a WHERE clickCount = (select min(clickCount) from article a )

# ⚠️在聚合函数max、min 或者 group by 中不能添加额外字段进行查询
# 除非更改mysql的模式 把 only_full_group_by 更改为 ''
-- set sql_mode = (SELECT REPLACE (@@sql_mode,'ONLY_FULL_GROUP_BY',''));
-- group by 里面要求 SELECT HAVING ORDER BY 语句后的字段 需要 GROUP  BY 后的字段严格一致
-- only_full_group_by模式下 SELECT HAVING ORDER BY 语句后的字段可以不和 GROUP BY 后的字段严格一致，
-- 	但是 GROUP BY 的字段需要是主键或唯一键时可以写非聚合字段
-- 	
-- HAVING 函数也是条件函数，与 WHERE 的区别是，HAVING 可以作用在合计函数的结果上，WHERE 不能

# 求和函数
SELECT SUM(clickCount) from article a  

# 平均函数
select AVG(clickCount) from article a  

# 获取低于平均值的数据
select * from article a  WHERE clickCount < (SELECT AVG(clickCount) from article a2)

# 获取商品平均出厂时间
select AVG(timestampdiff(YEAR,create_date,NOW())) from goods g  

# 小数部分 四舍五入
select ROUND(AVG(timestampdiff(YEAR,create_date,NOW())))  from goods g  

# 去重复操作
select DISTINCT brandName from goods g WHERE brandName is not NULL 

# 去掉两个字段都相同的重复
SELECT DISTINCT brandName,price  from goods g 
# 计数
select COUNT(DISTINCT brandName,price) from goods g  

# 分组 是对查询结果进行分组
select COUNT(brandName),  brandName  from goods g
WHERE brandName is NOT NULL AND price > 200
group by brandName 

# 查询每个品牌最便宜的商品
SELECT brandName , min(price) from goods g group by brandName 

# 改成查询所有信息的子查询，后面是多个数据，所以把 = 改成 in 
SELECT * FROM goods g
WHERE price in
(SELECT MIN(price)  from goods g2 where brandName is not null group by brandName)

# 按照多个字段进行分组
SELECT COUNT(*) as total, brandName ,saleState  FROM goods g group by brandName,saleState  
ORDER BY total desc 

```

